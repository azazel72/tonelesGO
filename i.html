<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Totales por grupos de columnas</title>
<link href="https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css" rel="stylesheet">
<style>
  body { font-family: system-ui, Arial, sans-serif; margin: 20px; }
  #tabla { height: 400px; }
</style>
</head>
<body>
<h2>Totales agrupando cada dos columnas (estilo Excel)</h2>
<div id="tabla"></div>

<script src="https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js"></script>
<script>
  // Datos de ejemplo
  const data = [
    { id: 1, a1: 10, a2: 20, b1: 5,  b2: 7,  c1: 12, c2: 8 },
    { id: 2, a1: 6,  a2: 9,  b1: 11, b2: 4,  c1: 10, c2: 15 },
    { id: 3, a1: 8,  a2: 12, b1: 7,  b2: 9,  c1: 14, c2: 6 },
  ];

  // Función para sumar columnas del mismo grupo
  const sumar = (field1, field2) => (cell) => {
    const row = cell.getRow().getData();
    const v1 = Number(row[field1]) || 0;
    const v2 = Number(row[field2]) || 0;
    return v1 + v2;
  };

  // Configuración de columnas con grupos de 2 + total
  const columns = [
    { title:"ID", field:"id", width:60, hozAlign:"center" },

    // Primer grupo
    { title:"Grupo A", columns:[
        { title:"A1", field:"a1", hozAlign:"right" },
        { title:"A2", field:"a2", hozAlign:"right" },
        { title:"Total A", field:"totalA", hozAlign:"right", bottomCalc:"sum",
          formatter: sumar("a1","a2") }
    ]},

    // Segundo grupo
    { title:"Grupo B", columns:[
        { title:"B1", field:"b1", hozAlign:"right" },
        { title:"B2", field:"b2", hozAlign:"right" },
        { title:"Total B", field:"totalB", hozAlign:"right", bottomCalc:"sum",
          formatter: sumar("b1","b2") }
    ]},

    // Tercer grupo
    { title:"Grupo C", columns:[
        { title:"C1", field:"c1", hozAlign:"right" },
        { title:"C2", field:"c2", hozAlign:"right" },
        { title:"Total C", field:"totalC", hozAlign:"right", bottomCalc:"sum",
          formatter: sumar("c1","c2") }
    ]},
  ];

  // Instancia Tabulator
  const table = new Tabulator("#tabla", {
    data,
    layout:"fitDataStretch",
    columns,
    bottomCalcFormatter:"money", // aplica formato de número a los totales inferiores
  });
</script>
</body>
</html>
